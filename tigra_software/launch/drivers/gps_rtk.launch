<?xml version="1.0"?>
<launch>

    <!-- ublox driver -->
    <node pkg="ublox_gps" type="ublox_gps" name="c94_m8p"
        output="screen" clear_params="true" respawn="true" respawn_delay="30">
        <rosparam command="load" file="$(find tigra_software)/config/gps/c94_m8p_rover.yaml" />
        <param name="device" value="/dev/ttyACM0"/>
        <remap from="rtcm" to="rtcm"/>
    </node>

    <!-- ntrip client -->
    <include file="$(find ntrip_client)/launch/ntrip_client.launch">
        <arg name="host" value="rtcm.smartnetrtk.ru"/>
        <arg name="port" value="7078" />
        <arg name="mountpoint" value="KRON" />
        <arg name="authenticate" value="true" />
        <arg name="username" value="lobazevk" />
        <arg name="password" value="77WpsEwhvSJbtax" />
        <arg name="ntrip_version" value="" />
        <arg name="ssl" value="false" />
        <arg name="cert" value="false" />
        <arg name="key" value="false" />
        <arg name="ca_cert" value="false" />
        <arg name="debug" value="true" />
        <arg name="rtcm_message_package" value="mavros_msgs" />
    </include>

    <node pkg="rqt_multiplot" type="rqt_multiplot" name="rqt_multiplot"
        args="
        --multiplot-config $(find tigra_software)/config/rqt/rqt_multiplot/gps_coords.xml
        --multiplot-run-all">
    </node>

    <node pkg="tigra_software" type="mavros_to_rtcm_converter.py" name="mavros_to_rtcm_converter"
        output="screen">
        <remap from="ntrip_client/rtcm" to="ntrip_client/rtcm"/>
        <remap from="rtcm" to="rtcm"/>
    </node>

</launch>